<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>職人補助ツール</title>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
		<style type=text/css>
			.cell{background-color:white;width:100px;height:100px;color:gray;margin:5px;
				float:left;text-align:center;vertical-align:middle;font-size:36px;
				vertical-align:middle;display:inline;zoom:1;
				border:none;}
		</style>
		<script type="text/javascript">
			var opt = function(s,e){
				document.write("<option></option>");
				for (i=s; i<=e; i++){
					document.write("<option>" + i + "</option>");	
				}
			}
			var init= function(){ // よく使う要素を予め変数しとく等
				

				ById = function(id){
					obj = document.getElementById(id);
					return obj;			
				} 
				getNum = function(id){
					
					num = Number(ById(id).value);
					if(num > 0){
						return num;
					}else{
						return 0;	
					}

				}

				menu1 = ById("menu1");
				menu2 = ById("menu2");
				menu3 = ById("menu3");

				a1 = ById("a1");
				a2 = ById("a2");
				a3 = ById("a3");
				b1 = ById("b1");
				b2 = ById("b2");
				b3 = ById("b3");
				c1 = ById("c1");
				c2 = ById("c2");
				c3 = ById("c3");
				
				// menu2
				craftsman = {
					"武器":[
					{"name" : "片手剣"},
					{"name" : "大剣"},
					{"name" : "斧"},
					{"name" : "槍"},
					{"name" : "鞭"},
					{"name" : "爪"},
					{"name" : "ハンマー"},
					{"name" : "短剣"},
					{"name" : "ブーメラン"}
					]  ,
						"防具" :[
						{"name" : "兜"},
						{"name" : "鎧（上）"},
						{"name" : "鎧（下）"},
						{"name" : "小手"},
						{"name" : "靴（鍛冶）"},
						{"name" : "盾"}
					]  ,
						"さいほう":[
						{"name" : "帽子"},
						{"name" : "服（上）"},
						{"name" : "服（下）"},
						{"name" : "グローブ"},
						{"name" : "靴（さいほう）"},
						{"name" : "ぬいぐるみ"}
					]  ,
						"木工" :[
						{"name" : "スティック"},
						{"name" : "両手杖"},
						{"name" : "棍"},
						{"name" : "扇"},
						{"name" : "弓"},
						{"name" : "家具"}
					] ,
						"道具" :[
						{"name" : "鍛冶ハンマー"},
						{"name" : "木工刀"},
						{"name" : "裁縫針"},
						{"name" : "ツボ"},
						{"name" : "ランプ"},
						{"name" : "家具"}
					]
				};

				//menu3
				recipe = {
					"スティック" : [
					{name:"ローリエの小枝",
						"a1":"-","a2":45,"a3":"-",
						"b1":"-","b2":45,"b3":"-",
						"c1":"-","c2":"-","c3":"-",
						"mate":"やわらかい枝×"
					},
					{name:"ピンスティック",
						"a1":"-","a2":60,"a3":"-",
						"b1":"-","b2":60,"b3":"-",
						"c1":"-","c2":"-","c3":"-",
						"mate":"毛皮×３ 枝×５"
					},
					{name:"フラワースティック",
						"a1":"-","a2":60,"a3":"-",
						"b1":"-","b2":90,"b3":"-",
						"c1":"-","c2":"-","c3":"-",
						"mate":"毛皮×３ 枝×５"
					},
					{name:"スライムステッキ",
						"a1":"-","a2":71,"a3":"-",
						"b1":"-","b2":104,"b3":"-",
						"c1":"-","c2":"-","c3":"-",
						"mate":"スライムゼリー×１ 枝×５"
					},
					{name:"ツインクルタクト",
						"a1":"-","a2":82,"a3":"-",
						"b1":"-","b2":115,"b3":"-",
						"c1":"-","c2":"-","c3":"-",
						"mate":"ほしのかけら×１ 枝×５"
					},
					{name:"モーモンスティック",
						"a1":"-","a2":93,"a3":"-",
						"b1":"-","b2":126,"b3":"-",
						"c1":"-","c2":"-","c3":"-",
						"mate":"ふさふさの毛皮×１ 枝×５"
					},
					{name:"フェザースティック",
						"a1":"-","a2":104,"a3":"-",
						"b1":"-","b2":137,"b3":"-",
						"c1":"-","c2":"-","c3":"-",
						"mate":"毛皮×３ 枝×５"
					},
					{name:"ラブリースティック",
						"a1":"-","a2":107,"a3":"-",
						"b1":"-","b2":150,"b3":"-",
						"c1":"-","c2":"-","c3":"-",
						"mate":"毛皮×３ 枝×５"
					},
					{name:"スラタワーステッキ",
						"a1":"-","a2":118,"a3":"-",
						"b1":"-","b2":161,"b3":"-",
						"c1":"-","c2":"-","c3":"-",
						"mate":"毛皮×３ 枝×５"
					},
					{name:"まてきのスティック",
						"a1":"-","a2":145,"a3":"-",
						"b1":"-","b2":193,"b3":"-",
						"c1":"-","c2":"-","c3":"-",
						"mate":"毛皮×３ 枝×５"
					},
					{name:"マジカルスティック",
						"a1":"-","a2":188,"a3":"-",
						"b1":"-","b2":145,"b3":"-",
						"c1":"-","c2":"-","c3":"-",
						"mate":"毛皮×３ 枝×５"
					},
					{name:"マポレーナスティック",
						"a1":"-","a2":155,"a3":"-",
						"b1":"-","b2":209,"b3":"-",
						"c1":"-","c2":"-","c3":"-",
						"mate":"毛皮×３ 枝×５"
					},
					{name:"ペロリンスティック",
						"a1":"-","a2":172,"a3":"-",
						"b1":"-","b2":226,"b3":"-",
						"c1":"-","c2":"-","c3":"-",
						"mate":"毛皮×３ 枝×５"
					},
					{name:"パラソルステッキ",
						"a1":"-","a2":215,"a3":"-",
						"b1":"-","b2":215,"b3":"-",
						"c1":"-","c2":"-","c3":"-",
						"mate":"毛皮×３ 枝×５"
					}
					],
					"両手杖" : [
					{name:"かしのつえ",
						"a1":"-","a2":53  ,"a3":"-",
						"b1":"-","b2":81,"b3":"-",
						"c1":"-","c2":0 ,"c3":"-",
						"mate":"",
						"precision":""
					},
					{name:"まどうしの杖",
						"a1":"-","a2":53  ,"a3":"-",
						"b1":"-","b2":81,"b3":"-",
						"c1":"-","c2":0 ,"c3":"-",
						"mate":"",
						"precision":""
					},
					{name:"さばきの杖",
						"a1":"-","a2":53  ,"a3":"-",
						"b1":"-","b2":81,"b3":"-",
						"c1":"-","c2":0 ,"c3":"-",
						"mate":"",
						"precision":""
					},
					{name:"あまぐものつえ",
						"a1":"-","a2":53  ,"a3":"-",
						"b1":"-","b2":81,"b3":"-",
						"c1":"-","c2":0 ,"c3":"-",
						"mate":"",
						"precision":""
					},
					{name:"まふうじのつえ",
						"a1":"-","a2":53  ,"a3":"-",
						"b1":"-","b2":81,"b3":"-",
						"c1":"-","c2":0 ,"c3":"-",
						"mate":"",
						"precision":""
					},
					{name:"うみなりのつえ",
						"a1":"-","a2":53  ,"a3":"-",
						"b1":"-","b2":81,"b3":"-",
						"c1":"-","c2":0 ,"c3":"-",
						"mate":"",
						"precision":""
					},
					{name:"ようせいのつえ",
						"a1":"-","a2":53  ,"a3":"-",
						"b1":"-","b2":81,"b3":"-",
						"c1":"-","c2":0 ,"c3":"-",
						"mate":"",
						"precision":""
					},
					{name:"いかづちの杖",
						"a1":"-","a2":53  ,"a3":"-",
						"b1":"-","b2":81,"b3":"-",
						"c1":"-","c2":0 ,"c3":"-",
						"mate":"",
						"precision":""
					},
					{name:"ピオラのつえ",
						"a1":"-","a2":53  ,"a3":"-",
						"b1":"-","b2":81,"b3":"-",
						"c1":"-","c2":0 ,"c3":"-",
						"mate":"",
						"precision":""
					},
					{name:"ルーンスタッフ",
						"a1":"-","a2":53  ,"a3":"-",
						"b1":"-","b2":81,"b3":"-",
						"c1":"-","c2":0 ,"c3":"-",
						"mate":"",
						"precision":""
					},
					{name:"マグマの杖",
						"a1":"-","a2":53  ,"a3":"-",
						"b1":"-","b2":81,"b3":"-",
						"c1":"-","c2":0 ,"c3":"-",
						"mate":"",
						"precision":""
					},
					],
					"扇" : [
					{name:"くじゃくのおうぎ",
						"a1":"-","a2":53  ,"a3":"-",
						"b1":"-","b2":81,"b3":"-",
						"c1":"-","c2":0 ,"c3":"-",
						"mate":"じょうぶな枝×３ にじいろの布×２　ひかりのいし×１",
						"precision":" 数値精度：☆☆ b1（会）"
					}
					],

					"帽子" : [
					{name:"水のサークレット",
						"a1":53  ,"a2":53  ,"a3":"-",
						"b1":"86","b2":"81","b3":"-",
						"c1":"-" ,"c2":"-" ,"c3":"-",
						"mate":"じょうぶな枝×３ にじいろの布×２　ひかりのいし×１",
						"precision":" 数値精度：☆☆ b1（会）"
					}
					]
				};

			}
var ref = function(target,arg){ // 減算更新処理
	res = document.getElementById(target);
	init = document.getElementById("I" + target);
	if(arg > 0){ // 数字以外は処理しない
		res.value = res.value - arg;
	}
	init.value = null;
	//誤差合計
	total = getNum("a1")
		+ getNum("a2")
		+ getNum("a3")
		+ getNum("b1")
		+ getNum("b2")
		+ getNum("b3")
		+ getNum("c1")
		+ getNum("c2")
		+ getNum("c3");
	ById("total").innerHTML = "誤差" + total;
}

var Load_Recipe = function(id){

	category = menu2.value;
	//DB取得
	obj = recipe[category];

	for(var key in obj) {
		if(obj[key].name === id){
			//更新
			a1.value = obj[key].a1;
			a2.value = obj[key].a2;;
			a3.value = obj[key].a3;;
			b1.value = obj[key].b1;;
			b2.value = obj[key].b2;;
			b3.value = obj[key].b3;;
			c1.value = obj[key].c1;;
			c2.value = obj[key].c2;;
			c3.value = obj[key].c3;;
			document.getElementById("recipe").innerHTML = "名前：" + id 
				+ "<br>素材：" + obj[key].mate
				+ "<br>精度：" + obj[key].precision;
		}
	}

}

var Load_category = function(id){
	obj = craftsman[id];
	html = "<option>----</option>";
	for(var key in obj) {
		html += "<option value=" + obj[key].name  + ">" +obj[key] .name + "</option>";
	}
	menu2.innerHTML = html;
}

var Load_item = function(id){
	obj = recipe[id];
	html = "<option>----</option>";
	for(var key in obj) {
		html += "<option value=" + obj[key].name  + ">" +obj[key] .name + "</option>";
	}
	menu3.innerHTML = html;
}
window.onload = init;

$(function(){
		$("input#a1").html("<b>55</b>");
		})

	</script>
</head>
<body bgcolor="#333333" text="#ffffff" >

	<select id=menu1 onChange='Load_category(this.value)'>
		<option>----</option>
		<option value="武器">武器</option>
		<option value="防具">防具</option>
		<option value="道具">道具</option>
		<option value="さいほう">さいほう</option>
		<option value="木工">木工</option>
	</select>
	<select id=menu2 onChange='Load_item(this.value)'> </select>
	<select id=menu3 onChange='Load_Recipe(this.value)'> </select>

	<div id= recipe></div>
	<div style="float:left">
		<h3>現在値 減算し0を目指す</h3>
		<div id=data_sheet>
			<input id=a1 class=cell>
			<input id=a2 class=cell>
			<input id=a3 class=cell>
			<div style="clear:both;"></div>
			<input id=b1 class=cell>
			<input id=b2 class=cell>
			<input id=b3 class=cell>
			<div style="clear:both;"></div>
			<input id=c1 class=cell>
			<input id=c2 class=cell>
			<input id=c3 class=cell>
			<div style="clear:both;"></div>
		</div>
		<div id=total> 誤差　</div>
	</div>

	<div style="float:left">
		<h3>INPUT</h3>
		<div id=input_tbl>
			<select id=Ia1 class=cell onChange='ref("a1",this.value);'>
				<script>opt(1,39);</script>
			</select>
			<select id=Ia2 class=cell onChange='ref("a2",this.value);'>
				<script>opt(1,39);</script>
			</select>
			<select id=Ia3 class=cell onChange='ref("a3",this.value);'>
				<script>opt(1,39);</script>
			</select>
			<div style="clear:both;"></div>
			<select id=Ib1 class=cell onChange='ref("b1",this.value);'>
				<script>opt(1,39);</script>
			</select>
			<select id=Ib2 class=cell onChange='ref("b2",this.value);'>
				<script>opt(1,39);</script>
			</select>
			<select id=Ib3 class=cell onChange='ref("b3",this.value);'>
				<script>opt(1,39);</script>
			</select>
			<div style="clear:both;"></div>
			<select id=Ic1 class=cell onChange='ref("c1",this.value);'>
				<script>opt(1,39);</script>
			</select>
			<select id=Ic2 class=cell onChange='ref("c2",this.value);'>
				<script>opt(1,39);</script>
			</select>
			<select id=Ic3 class=cell onChange='ref("c3",this.value);'>
				<script>opt(1,39);</script>
			</select>
			<div style="clear:both;"></div>
		</div>
	</body>
</html>
